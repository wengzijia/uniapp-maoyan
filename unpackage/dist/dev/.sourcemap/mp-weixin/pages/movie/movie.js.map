{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/weng/Desktop/自己/uniapp/maoyan/pages/movie/movie.vue?37bb","webpack:///C:/Users/weng/Desktop/自己/uniapp/maoyan/pages/movie/movie.vue?50fe","webpack:///C:/Users/weng/Desktop/自己/uniapp/maoyan/pages/movie/movie.vue?c868","webpack:///C:/Users/weng/Desktop/自己/uniapp/maoyan/pages/movie/movie.vue?46dc","uni-app:///pages/movie/movie.vue","webpack:///C:/Users/weng/Desktop/自己/uniapp/maoyan/pages/movie/movie.vue?e12c","webpack:///C:/Users/weng/Desktop/自己/uniapp/maoyan/pages/movie/movie.vue?f889"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;kDAAA;AACA;AACA,4F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACgL;AAChL,gBAAgB,qLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAspB,CAAgB,upBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsE1qB,iD,CALA,S,YAAA,S,CACA,c,YAAA,c,CACA,iB,YAAA,iB,CACA,qB,YAAA,qB,CACA,e,YAAA,e;;;AAIA,kD,CADA,W,aAAA,W;;AAGA;AACA;AACA,oD;;AAEA;AACA,MADA,kBACA;AACA;AACA,qBADA;AAEA,eAFA,EAEA;AACA,8BAHA;AAIA,uBAJA;AAKA,qBALA;AAMA,uBANA,EAMA;AACA,wBAPA,EAOA;AACA,aARA;AASA,kBATA;AAUA,0BAVA,EAUA;AACA,uBAXA,EAWA;AACA,0BAZA,EAYA;AACA,uBAbA,CAaA;AAbA;AAeA,GAjBA;AAkBA;AACA;AACA,aAFA,qBAEA,KAFA,EAEA;;AAEA;AACA,KALA;AAMA;AACA,mBAPA,6BAOA;AACA;AACA;AACA,qBADA;AAEA,4BAFA;AAGA,eAHA,mBAGA,GAHA,EAGA;AACA;;AAEA,4BAHA;;AAKA,uBALA,CAGA,QAHA,EAIA,SAJA,GAKA,GALA,CAIA,SAJA;AAMA,oDANA,SAMA,IANA;AAOA;AACA,wBARA,GAQA,iCARA;AASA;AACA,sCAVA;AAWA,SAdA;AAeA,YAfA,gBAeA,GAfA,EAeA;AACA;AACA,qCADA;;AAGA,SAnBA;;AAqBA,KA9BA;AA+BA;AACA,aAhCA,uBAgCA;AACA,8DADA,SACA,MADA;;AAGA,+CAHA;AAIA;AACA;AACA,gCADA,IALA;;;;AAUA;AACA;AACA;AACA;AACA,iBAHA;AAIA;AACA;AACA,8CAjBA;AAkBA,KAlDA;AAmDA;AACA,oBApDA,8BAoDA;AACA,yCADA,SACA,MADA;AAEA;AACA;AACA;AACA,iBAHA;AAIA,8CANA;AAOA,KA3DA;AA4DA;AACA,cA7DA,wBA6DA;AACA,mCADA,SACA,MADA;AAEA,yBAFA,GAEA,MAFA;AAGA;AACA;AACA;AACA,iBAHA;AAIA;AACA,+BARA,GAQA,EARA;AASA;AACA;AACA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA,iBARA;AASA,uDAlBA;AAmBA,KAhFA;AAiFA;AACA,mBAlFA,6BAkFA;;;AAGA,mCAHA,gDAEA,YAFA,yBAEA,YAFA;AAIA;AACA,0CALA;AAMA,KAxFA;AAyFA;AACA,kBA1FA,4BA0FA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,KAjGA;;AAmGA;AACA,iBApGA,2BAoGA;AACA;AACA;AACA,gCADA;AAEA,+BAFA;AAGA,kCAHA;AAIA,wBAJA;AAKA;AACA;AACA,KA7GA;AA8GA,aA9GA,uBA8GA;AACA,qCADA,CACA;AACA,KAhHA,EAlBA;;AAoIA;AACA,wBADA,EApIA;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,gCADA;;AAGA,0CAHA;AAIA;AACA,OAbA;;AAeA,GA9JA;AA+JA;AACA;AACA;AACA;AACA,GAnKA;AAoKA,QApKA,oBAoKA;AACA;AACA;AACA;AACA,kBAJA,GAIA,yBAJA;AAKA;AACA;AACA,eAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxCA,2EAyCA,CA7MA,E;;;;;;;;;;;;;;;;;;AC/EA;AAAA;AAAA;AAAA;AAA6uC,CAAgB,sqCAAG,EAAC,C;;;;;;;;;;ACAjwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/movie/movie.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/movie/movie.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./movie.vue?vue&type=template&id=6ba5ef28&\"\nvar renderjs\nimport script from \"./movie.vue?vue&type=script&lang=js&\"\nexport * from \"./movie.vue?vue&type=script&lang=js&\"\nimport style0 from \"./movie.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/movie/movie.vue\"\nexport default component.exports","export * from \"-!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./movie.vue?vue&type=template&id=6ba5ef28&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event, index) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        index = _temp2.index\n\n      var _temp, _temp2\n\n      return _vm.tabSelect(index)\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./movie.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./movie.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"movieContainer\">\r\n\t\t<view>\r\n\t\t\t<text>{{city}}</text>\r\n\t\t\t<icon class=\"iconfont icon-dingwei\"></icon>\r\n\t\t</view>\r\n\t\t<!-- tabs标签页 -->\r\n\t\t<view class=\"tabs\">\r\n\t\t\t<view class=\"tab_item\" :class=\"{cur:index === tabCur}\" v-for=\"(item, index) in ['热映', '待映']\" :key=\"index\"\r\n\t\t\t\t@click=\"tabSelect(index)\">{{ item }}</view>\r\n\t\t</view>\r\n\t\t<!-- open-type=\"openSetting\" \t打开授权设置页    -->\r\n\t\t<button open-type=\"openSetting\" type=\"warn\" plain v-if=\"!isAgreeGetLocation\">打开授权页面</button>\r\n\t\t<!-- 标签页对应的内容 -->\r\n\t\t<view>\r\n\t\t\t<!-- 热映电影 -->\r\n\t\t\t<block v-if=\"tabCur === 0\">\r\n\t\t\t\t<!--  onload生命周期设置 refresher-triggered 绑定的变量设为true      @refresherrestore  自定义下拉刷新被复位  也就是重置\r\n\t\t\t\t这样才可以再次下来刷新      this.isPullRefresh = 'restore';    进行重置\r\n\t\t\t\trefresher-enabled 开启自定义下拉刷新    @refresherrefresh   自定义下拉刷新被触发 \r\n\t\t\t\trefresher-triggered   true 表示下拉刷新已经被触发   true 也就是复位   不然会卡在那里\r\n\t\t\t\t刚开始为false    下拉刷新改为true就关闭    -->\r\n\t\t\t\t<scroll-view refresher-enabled=\"true\" @scrolltolower=\"scrollLoadMore\"\r\n\t\t\t\t\t@refresherrefresh=\"pullToRefresh\" :refresher-triggered=\"isPullRefresh\" @refresherrestore=\"onRestore\" scroll-y=\"true\"\r\n\t\t\t\t\t:style=\"{height: windowHeight + 'px'}\">\r\n\t\t\t\t\t<block v-for=\"item in movieListData\" :key=\"item.auto_id\">\r\n\t\t\t\t\t\t<navigator open-type=\"navigate\" style=\"border-bottom: 2rpx solid #f7ebeb\">\r\n\t\t\t\t\t\t\t<movieList :hotMovieData=\"item\"></movieList>\r\n\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view style=\"margin:auto;background-color:red;color:white;width:200rpx;\" v-if=\"!isLoadFinish\">已经到底啦!!!\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t\t<!-- 待映电影 -->\r\n\t\t\t<block v-else-if=\"tabCur === 1\">\r\n\t\t\t\t<scroll-view  scroll-x=\"true\" >\r\n\t\t\t\t\t<!-- 期待电影 -->\r\n\t\t\t\t\t<!-- <view class=\"rich\">\r\n\t\t\t\t\t\t<rich-text :nodes=\"expectMoviesData\"></rich-text>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t\t<view class=\"lateralContainer\">\r\n\t\t\t\t\t<view class=\"expectMovies\" v-for=\"item in crosswiseData\" :key=\"item.id\">\r\n\t\t\t\t\t\t<image class=\"movies\" :src=\"item.img\"></image>\r\n\t\t\t\t\t\t<view class=\"title\">{{item.nm}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t<scroll-view  scroll-y=\"true\" >\r\n\t\t\t\t<!-- 待映电影列表 -->\r\n\t\t\t\t<view v-for=\"(item,index) in reflectedData\" :key=\"item.id\">\r\n\t\t\t\t\t<view> {{index}} </view>\r\n\t\t\t\t\t<block v-for=\"data in item\" :key=\"data.id\">\r\n\t\t\t\t\t\t<navigator open-type=\"navigate\" style=\"border-bottom: 2rpx solid #f7ebeb\">\r\n\t\t\t\t\t\t\t<movieList :hotMovieData=\"data\"></movieList>\r\n\t\t\t\t\t\t</navigator>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t</block>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\tconst {\r\n\t\tfetchCity,\r\n\t\tfetchMovieList,\r\n\t\tfetchExpectMovies,\r\n\t\tfetchHorizontalMovies,\r\n\t\tfetchToHitMovie\r\n\t} = require('../../api/index.js')\r\n\tconst {\r\n\t\tapiCurrying\r\n\t} = require(\"../../utils/util.js\")\r\n\r\n\tconst wxLogin = apiCurrying(wx.login)\r\n\tconst wxGetLocation = apiCurrying(wx.getLocation)\r\n\tconst wxGetSystemInfo = apiCurrying(wx.getSystemInfo)\r\n\timport movieList from \"../../components/movieList.vue\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcity: \"中华人民共和国\",\r\n\t\t\t\ttabCur: 0, // 当前tabs下标\r\n\t\t\t\tisAgreeGetLocation: true,\r\n\t\t\t\tisFirstTime: true,\r\n\t\t\t\twindowHeight: 0,\r\n\t\t\t\tmovieListData: [], // 热映电影数据\r\n\t\t\t\tisLoadFinish: true, // 是否加载完成,   // true 未加载完毕    false  加载完毕\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpagesize: 10,\r\n\t\t\t\texpectMoviesData: \"\", // 待映期待电影\r\n\t\t\t\treflectedData: [], // 待映电影数据,\r\n\t\t\t\tisPullRefresh: false, // 是否下拉刷新   \r\n\t\t\t\tcrosswiseData:[] // 横向电影数据\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// tab切换\r\n\t\t\ttabSelect(index) {\r\n\r\n\t\t\t\tthis.tabCur = index\r\n\t\t\t},\r\n\t\t\t// 获取用户位置\r\n\t\t\tgetUserLocation() {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'wgs84',\r\n\t\t\t\t\tisHighAccuracy: true,\r\n\t\t\t\t\tasync success(res) {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\t\tlongitude\r\n\t\t\t\t\t\t} = res;\r\n\t\t\t\t\t\tlet data = await fetchCity(latitude, longitude);\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tlet city = data.result.addressComponent.city;\r\n\t\t\t\t\t\twx.setStorageSync('city', city)\r\n\t\t\t\t\t\t_this.city = city\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t_this.setData({\r\n\t\t\t\t\t\t\tisAgreeGetLocation: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取热映电影列表\r\n\t\t\tasync movieList() {\r\n\t\t\t\tlet result = await fetchMovieList(this.page, this.pagesize);\r\n\t\t\t\t// 说明加载完毕\r\n\t\t\t\tif (result.length < this.pagesize) {\r\n\t\t\t\t\tthis.isLoadFinish = false\r\n\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\ttitle: '加载完毕了',\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 正则替换   w.h 替换为空    图片才能加载出来\r\n\t\t\t\tresult = result.map(item => {\r\n\t\t\t\t\titem.img = item.img.replace(/\\w.h/, '')\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\t// 合并数据\r\n\t\t\t\tresult = [...this.movieListData, ...result]\r\n\t\t\t\tthis.movieListData = result\r\n\t\t\t},\r\n\t\t\t// 获取横向期待电影\r\n\t\t\tasync horizontalMovies(){\r\n\t\t\t\tlet result = await fetchHorizontalMovies();\r\n\t\t\t\tresult = result.map(item=>{\r\n\t\t\t\t\titem.img = item.img.replace(/\\w.h/,'')\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\tthis.crosswiseData = result\r\n\t\t\t},\r\n\t\t\t// 获取待映电影\r\n\t\t\tasync toHitMovie(){\r\n\t\t\t\tlet result = await fetchToHitMovie();\r\n\t\t\t\tlet movieList = result\r\n\t\t\t\tmovieList = movieList.map(item => {\r\n\t\t\t\t\titem.img = item.img.replace(/\\/w.h/, '')\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\t// 日期分组  {  1月1日 周六: [{…}] }\r\n\t\t\t\tlet dateGroupMovies = {};\r\n\t\t\t\tmovieList.forEach(item => {\r\n\t\t\t\t\t// 如果里面有日期(key)就把每一项数据加进去作为值(value)\r\n\t\t\t\t\t// 没有日期(key)就把每一项数据作为他的key\r\n\t\t\t\t\tif (dateGroupMovies[item.comingTitle]) {\r\n\t\t\t\t\t\tdateGroupMovies[item.comingTitle].push(item)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdateGroupMovies[item.comingTitle] = [item]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.reflectedData = dateGroupMovies\r\n\t\t\t},\r\n\t\t\t// 获取设备窗口的高度\r\n\t\t\tasync getWindowHeight() {\r\n\t\t\t\tlet {\r\n\t\t\t\t\twindowHeight\r\n\t\t\t\t} = await wxGetSystemInfo()\r\n\t\t\t\tthis.windowHeight = windowHeight\r\n\t\t\t\tconsole.log(windowHeight)\r\n\t\t\t},\r\n\t\t\t// 上拉加载更多   页码++  然后再发送请求获取\r\n\t\t\tscrollLoadMore() {\r\n\t\t\t\t// 说明加载完毕就不再执行\r\n\t\t\t\tif (!this.isLoadFinish) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.page++,\r\n\t\t\t\t\tthis.movieList()\r\n\t\t\t},\r\n\r\n\t\t\t// 下拉刷新  页码始终为第一页   \r\n\t\t\tpullToRefresh() {\r\n\t\t\t\tif (this.tabCur === 0) {\r\n\t\t\t\t\tthis.page = 1,\r\n\t\t\t\t\tthis.isLoadFinish = true,\r\n\t\t\t\t\tthis.movieListData = [],\r\n\t\t\t\t\tthis.isPullRefresh = false,\r\n\t\t\t\t\tthis.movieList()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonRestore(){\r\n\t\t\t\tthis.isPullRefresh = 'restore'; // 需要重置\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tmovieList\r\n\t\t},\r\n\t\t// 页面显示的时候触发\r\n\t\tonShow: function() {\r\n\t\t\tlet _this = this;\r\n\t\t\tconsole.log('显示');\r\n\t\t\t// 不是第一次就不再往下执行\r\n\t\t\tif (this.isFirstTime) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\twx.getSetting({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t// 如果用户同意,就获取位置,并且隐藏授权按钮\r\n\t\t\t\t\tif (res.authSetting['scope.userLocation']) {\r\n\t\t\t\t\t\t_this.getUserLocation();\r\n\t\t\t\t\t\t_this.isAgreeGetLocation = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 否则就提示授权,并且把授权按钮显示\r\n\t\t\t\t\t\twx.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请打开授权页面进行授权',\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t_this.isAgreeGetLocation = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 页面隐藏的时候触发\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('隐藏');\r\n\t\t\tthis.isFirstTime = false\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\t//初始化设备窗口高度\r\n\t\t\tthis.getWindowHeight()\r\n\t\t\t// 获取位置\r\n\t\t\tlet city = wx.getStorageSync('city');\r\n\t\t\tif (city) {\r\n\t\t\t\tthis.city = city\r\n\t\t\t} else {\r\n\t\t\t\t//调用方法 重新获取用户位置\r\n\t\t\t\tthis.getUserLocation()\r\n\t\t\t}\r\n\t\t\t// 获取横向期待电影\r\n\t\t\tthis.horizontalMovies()\r\n\t\t\t// 下拉刷新\r\n\t\t\tthis.isPullRefresh = true\r\n\t\t\t// 初始化热映电影列表\r\n\t\t\tthis.movieList()\r\n\t\t\t// 获取待映电影列表\r\n\t\t\tthis.toHitMovie()\r\n\t\t\t// let result = await Promise.all([fetchExpectMovies(), fetchToHitMovie()])\r\n\t\t\t// // 获取待映近期期待的电影 \r\n\t\t\t// let expectMoviesData = result[0]\r\n\t\t\t// this.expectMoviesData = expectMoviesData\r\n\t\t\t// let movieList = result[1]\r\n\t\t\t// console.log('mo',result[1])\r\n\t\t\t// movieList = movieList.map(item => {\r\n\t\t\t// \titem.img = item.img.replace(/\\/w.h/, '')\r\n\t\t\t// \treturn item\r\n\t\t\t// })\r\n\t\t\t// // 日期分组  {  1月1日 周六: [{…}] }\r\n\t\t\t// let dateGroupMovies = {};\r\n\t\t\t// movieList.forEach(item => {\r\n\t\t\t// \t// 如果里面有日期(key)就把每一项数据加进去作为值(value)\r\n\t\t\t// \t// 没有日期(key)就把每一项数据作为他的key\r\n\t\t\t// \tif (dateGroupMovies[item.comingTitle]) {\r\n\t\t\t// \t\tdateGroupMovies[item.comingTitle].push(item)\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tdateGroupMovies[item.comingTitle] = [item]\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\t\t\t// this.reflectedData = dateGroupMovies\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"../../assets/iconfont.wxss\";\r\n\r\n\t.tabs {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-evenly;\r\n\t\tfont-size: 32rpx;\r\n\t\tbackground-color: #FFF;\r\n\t\tcolor: #A9A9A9;\r\n\t}\r\n\r\n\t.tab_item {\r\n\t\theight: 114rpx;\r\n\t\tline-height: 100rpx;\r\n\r\n\t\t&.cur {\r\n\t\t\tposition: relative;\r\n\t\t\tcolor: #F62D5C;\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\twidth: 36rpx;\r\n\t\t\t\theight: 6rpx;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbottom: 20rpx;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\tmargin-left: -18rpx;\r\n\t\t\t\tbackground-color: #F62D5C;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.movieContainer{\r\n\t.lateralContainer{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t.expectMovies{\r\n\t\tmargin: 20rpx;\r\n\t\t.movies{\r\n\t\t\twidth: 300rpx;\r\n\t\t\theight: 300rpx;\r\n\t\t}\r\n\t}\r\n\t}\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./movie.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\uiapp开发工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./movie.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1642668381177\n      var cssReload = require(\"D:/uiapp开发工具/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}